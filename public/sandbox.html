<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Sandbox - PCU-IA</title>
  <style>body { margin: 0; overflow: hidden; background: #0f172a; }</style>
</head>
<body>
  <script>
    // ComunicaciÃ³n segura con parent
    window.addEventListener('message', (e) => {
      if (e.origin !== window.location.origin) return;
      if (e.data.type === 'RUN_CODE') {
        try {
          // Ejecutar en contexto aislado
          const log = (...args) => {
            parent.postMessage({ type: 'CONSOLE_LOG', data: args }, '*');
          };
          const code = `(function(console) { ${e.data.code} })(window.console)`;
          eval(code);
        } catch (err) {
          parent.postMessage({ type: 'CONSOLE_ERROR', data: [err.message] }, '*');
        }
      }
    });
  </script>
</body>
</html>
